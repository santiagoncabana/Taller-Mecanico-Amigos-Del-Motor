<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MecApp - Citas</title>
    <link rel="stylesheet" href="/MecApp/css/encargado-css/style_citas.css">
</head>

<body>
    <!-- NAVBAR -->
    <nav class="navbar">
        <div class="nav-brand">
            <div class="nav-logo">
                <span class="nav-gear">丘뙖잺</span>
            </div>
            <span class="app-name">MecApp</span>
        </div>
        <div class="nav-menu">
            <a href="./dashboard-encargado.html" class="nav-link">Inicio</a>
            <a href="./clientes.html" class="nav-link">Clientes</a>
            <a href="./vehiculos.html" class="nav-link">Veh칤culos</a>
            <a href="./citas.html" class="nav-link active">Citas</a>
            <a href="./encargado.html" class="nav-link">Encargado</a>
        </div>
        <div class="nav-user">
            <span class="user-name">Encargado</span>
            <div class="user-avatar">E</div>
        </div>
    </nav>

    <!-- CONTENIDO PRINCIPAL -->
    <div class="container">
        <!-- HEADER CON ESTAD칈STICAS -->
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-label">Citas Confirmadas Hoy:</span>
                <span class="stat-value" id="citas-confirmadas">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Citas Canceladas:</span>
                <span class="stat-value" id="citas-canceladas">0</span>
            </div>
        </div>

        <!-- FILTROS -->
        <div class="filters-section">
            <span class="filter-label">Filtrar por estado:</span>
            <div class="filter-buttons">
                <button class="filter-btn active" data-estado="todos">Todos</button>
                <button class="filter-btn" data-estado="pendiente">Pendiente</button>
                <button class="filter-btn" data-estado="en_curso">En Curso</button>
                <button class="filter-btn" data-estado="finalizado">Finalizado</button>
            </div>
        </div>

        <!-- T칈TULO DE SECCI칍N -->

        <!-- GRID DE CITAS -->
        <div id="appointments-container" class="appointments-grid">
            <!-- Loading state -->
            <div class="loading-container">
                <div class="loading-spinner"></div>
                <p>Cargando citas...</p>
            </div>
        </div>
    </div>

    <!-- MODAL EDITAR TURNO -->
    <div id="edit-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-dialog">
            <button class="modal-close" id="edit-modal-close">칑</button>
            <div class="modal-content">
                <h3>Editar Turno</h3>
                <form id="edit-form">
                    <input type="hidden" id="edit-turno-dni">

                    <div class="form-group">
                        <label>Fecha</label>
                        <input type="date" id="edit-fecha" required>
                    </div>

                    <div class="form-group">
                        <label>Hora</label>
                        <input type="time" id="edit-hora" required>
                    </div>

                    <div class="form-group">
                        <label>Tel칠fono</label>
                        <input type="tel" id="edit-telefono" maxlength="20">
                    </div>

                    <div class="form-group">
                        <label>DNI</label>
                        <input type="text" id="edit-dni" maxlength="20">
                    </div>

                    <div class="form-group">
                        <label>Estado</label>
                        <select id="edit-estado" required>
                            <option value="pendiente">Pendiente</option>
                            <option value="en_curso">En Curso</option>
                            <option value="finalizado">Finalizado</option>
                        </select>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancel-edit">Cancelar</button>
                        <button type="submit" class="btn-primary">Guardar Cambios</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL CREAR ORDEN DE SERVICIO -->
    <div id="orden-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-dialog">
            <button class="modal-close" id="orden-modal-close">칑</button>
            <div class="modal-content">
                <h3>Crear Orden de Servicio</h3>
                <form id="orden-form">
                    <input type="hidden" id="orden-turno-id">

                    <div class="form-group">
                        <label>Descripci칩n del Trabajo *</label>
                        <textarea id="orden-descripcion" rows="4" required
                            placeholder="Describe el trabajo realizado..."></textarea>
                    </div>

                    <div class="form-group">
                        <label>Precio Total *</label>
                        <input type="number" id="orden-precio" step="0.01" min="0" required placeholder="0.00">
                    </div>

                    <div class="info-readonly">
                        <p><strong>Turno ID:</strong> <span id="orden-turno-display"></span></p>
                        <p><strong>Cliente:</strong> <span id="orden-cliente-display"></span></p>
                        <p><strong>Veh칤culo:</strong> <span id="orden-vehiculo-display"></span></p>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" id="cancel-orden">Cancelar</button>
                        <button type="submit" class="btn-primary">Crear Orden</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- MODAL CONFIRMACI칍N ELIMINAR -->
    <div id="delete-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-dialog modal-small">
            <button class="modal-close" id="delete-modal-close">칑</button>
            <div class="modal-content">
                <h3>丘멆잺 Confirmar Eliminaci칩n</h3>
                <p>쮼st치s seguro de que deseas eliminar este turno?</p>
                <p class="warning-text">Esta acci칩n no se puede deshacer.</p>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cancel-delete">Cancelar</button>
                    <button type="button" class="btn-danger" id="confirm-delete">Eliminar</button>
                </div>
            </div>
        </div>
    </div>


    <div id="ver-orden-modal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-dialog modal-small">
            <button class="modal-close" id="ver-orden-modal-close">칑</button>
            <div class="modal-content">
                <h3>游늶 Detalle de Orden</h3>
                <p><strong>Orden #:</strong> <span id="detalle-orden-id"></span></p>
                <p><strong>Cliente:</strong> <span id="detalle-cliente"></span></p>
                <p><strong>Veh칤culo:</strong> <span id="detalle-vehiculo"></span></p>
                <p><strong>Patente:</strong> <span id="detalle-patente"></span></p>
                <p><strong>Descripci칩n:</strong> <span id="detalle-descripcion"></span></p>
                <p><strong>Precio Total:</strong> $<span id="detalle-precio"></span></p>

                <div class="modal-actions">
                    <button type="button" class="btn-secondary" id="cerrar-ver-orden">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/MecApp/js/citas.js"></script>
</body>

</html>